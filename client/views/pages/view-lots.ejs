<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>View Lots</title>
  <link rel="stylesheet" href="/assets/css/main.css">

  <style>
    * sticky first three columns */
lots-table .sticky-col { position: sticky; z-index: 1; }
.lots-table .sc-1 { left: 108px; z-index: 2; }  /* after 3 icon cols          */
.lots-table .sc-2 { left: 188px; }              /* 108 + 80 (Job #)           */
.lots-table .sc-3 { left: 338px; }  

/* Give address room, keep it two-line */
.lots-table .sc-3 { min-width: 300px; } /* widen address */

.lots-table .sc-3,
.lots-table .sc-3 .cell-col { white-space: normal; }
.lots-table .sc-3 a.link { display: block; }

/* table look & feel */
.lots-table td, .lots-table th { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; height: 44px; }
.lots-table .text-right { text-align: right; }

/* compact two-line cells */
.cell-col { display: flex; flex-direction: column; line-height: 1.1; }
.cell-top { font-weight: 600; }
.cell-sub { opacity: 0.75; font-size: 0.86em; }
.cell-col.strong .cell-top, .strong { font-weight: 700; }

/* status badges */
.status-badge { display: inline-block; padding: 2px 8px; border-radius: 999px; font-size: 0.78rem; }
.badge-available { background: #e6f7f0; color: #107f54; }
.badge-spec      { background: #eef2ff; color: #4338ca; }
.badge-coming    { background: #fff7ed; color: #b45309; }
.badge-sold      { background: #fee2e2; color: #b91c1c; }
.badge-muted     { background: #f1f5f9; color: #334155; }

/* timeline */
.timeline2-cell .timeline2-wrap {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: flex-end;
  text-align: right;
}
.timeline2-cell .timeline2-sec {
  display: flex;
  flex-direction: column;
  gap: 1px;
  align-items: flex-end;
}
.timeline2-cell .timeline2-label {
  font-size: 0.65rem;
  letter-spacing: .02em;
  text-transform: uppercase;
  opacity: .6;
}
.timeline2-cell .timeline2-value {
  font-size: 0.85rem;
  font-weight: 600;
}
.timeline2-cell .timeline2-divider {
  height: 1px;
  background: rgba(0,0,0,0.1);
  width: 100%;
  margin: 2px 0;
}

/* walks */
.walk-dots { display: inline-flex; gap: 8px; align-items: center; }
.dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.dot-none   { background: #ef4444; }  /* red */
.dot-future { background: #3b82f6; }  /* blue */
.dot-today  { background: #eab308; }  /* yellow */
.dot-past   { background: #10b981; }  /* green */

/* link and hover */
.lots-table a.link { text-decoration: none; }
.lots-table tr:hover td { background: rgba(0,0,0,0.02); }
/* Table header: swap green for a soft gray-on-charcoal look */
.lots-table thead,
.lots-table thead tr,
.lots-table thead th,
.lots-table thead th.sticky-col {
  background: #0f172a !important;   /* dark slate */
  color: #e5e7eb !important;
  border-bottom: 1px solid #0b1220;
}

/* 2) Keep sticky WHITE only for BODY cells (not headers) */
.lots-table tbody td.sticky-col {
  background: #fff;                 /* body sticky bg */
}

/* (optional) hover tweak */
.lots-table thead th:hover { background: #f1f5f9 !important; }

.lots-table th.icon-head:nth-child(3),
.lots-table td.icon-cell:nth-child(3) {
  width: 28px;
  min-width: 28px;
  padding: 0;
}

.lots-table .sc-3 a.link,
.lots-table .sc-3 a.link:visited,
.lots-table .sc-3 a.link:hover,
.lots-table .sc-3 a.link:active {
  text-decoration: none;
  color: inherit;
}

/* Keep accessibility: visible focus ring without underline */
.lots-table .sc-3 a.link:focus {
  outline: 2px solid #0ea5e9;
  outline-offset: 2px;
  text-decoration: none;
}

/* Icon cells: tiny & centered */
.lots-table td.icon-cell,
.lots-table th.icon-head {
  width: 36px;
  min-width: 36px;
  text-align: center;
  padding: 0; /* keep tight */
}

/* Nuke default button chrome so the icon is visible on dark header and light rows */
.icon-btn.btn.btn-sm.btn-link {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
  line-height: 1;
  box-shadow: none !important;
}

/* Make the actual SVG small and crisp */
.icon-btn img {
  width: 16px;
  height: 16px;
  display: block;            /* removes extra inline spacing */
  filter: none;              /* ensure no unwanted tint */
}

/* Optional: visible keyboard focus ring without adding a background */
.icon-btn:focus-visible {
  outline: 2px solid #0ea5e9;
  outline-offset: 2px;
}

/* Two-line price cell */
.price-cell .price-wrap {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: flex-end; /* align everything right */
  text-align: right;
}

.price-cell .price-sec {
  display: flex;
  flex-direction: column;
  gap: 1px;
  align-items: flex-end; /* right-align label + value */
}

.price-cell .price-label {
  font-size: 0.65rem;        /* smaller label */
  letter-spacing: .02em;
  text-transform: uppercase;
  opacity: .6;
}

.price-cell .price-value {
  font-size: 0.85rem;        /* slightly smaller than before */
  font-weight: 600;
}

.price-cell .price-divider {
  height: 1px;
  background: rgba(0,0,0,0.1);
  width: 100%;
  margin: 2px 0;
}

  </style>
</head>


<body>
  <%- include('../partials/nav') %>
  <%- include('../partials/top-nav-community') %>

<!-- TOP BAR (re-using Contacts topbar classes) -->
<div id="lotsTopBar" class="contact-topbar">
  <div class="topbar-left">
    <label for="vl-community" class="visually-hidden">Community</label>
    <select id="vl-community" class="form-select form-select-sm" style="min-width: 260px;">
      <!-- populated by JS -->
    </select>

    <!-- Search -->
    <div style="min-width: 260px; max-width: 420px;">
      <input id="vl-search" class="form-control form-control-sm" placeholder="Search address..." />
    </div>

    <!-- Total -->
    <div class="topbar-total">
      <span class="total-label">Total:</span>
      <span id="vl-count" class="total-value">0</span>
    </div>
  </div>

  <!-- Filter pills (visual now; wire later) -->
  <div class="topbar-filters" id="vl-statusFilters">
    <button class="status-pill" id="vl-filter-available" data-filter="available">
      <span class="label">Available</span>
    </button>
    <button class="status-pill" id="vl-filter-spec" data-filter="spec">
      <span class="label">SPEC's</span>
    </button>
    <button class="status-pill" id="vl-filter-coming" data-filter="comingSoon">
      <span class="label">Coming Soon</span>
    </button>
    <button class="status-pill" id="vl-filter-sold" data-filter="sold">
      <span class="label">Sold</span>
    </button>
  </div>
</div>

<div class="table-container">
  <table id="lotsTable" class="lots-table">
      <colgroup>
        <col style="width: 32px" />   <!-- Task -->
        <col style="width: 32px" />   <!-- Flag -->
        <col style="width: 28px" />   <!-- Comment (narrowest) -->
        <col style="width: 80px" />   <!-- Job # -->
        <col style="width: 120px" />  <!-- Lot / Block (slimmer) -->
        <col />                        <!-- Address (flex / wider) -->
        <col style="width: 120px" />  <!-- Plan / Elv (slimmer) -->
        <col style="width: 120px" />  <!-- Home Status -->
        <col style="width: 230px" />  <!-- Timeline -->
        <col style="width: 110px" />  <!-- Walks -->
        <col style="width: 180px" />  <!-- Closing -->
        <col style="width: 140px" />  <!-- Price -->
      </colgroup>
    <thead>
  <tr>
    <th class="icon-head"><span class="visually-hidden">Task</span></th>
    <th class="icon-head"><span class="visually-hidden">Flag</span></th>
    <th class="icon-head"><span class="visually-hidden">Comment</span></th>
    <th class="sticky-col sc-1">Job #</th>
    <th class="sticky-col sc-2">Lot / Block</th>
    <th class="sticky-col sc-3">Address</th>
    <th>Plan / Elv</th>
    <th>Home Status</th>
    <th>Timeline</th>
    <th>Walks</th>
    <th>Closing</th>
    <th class="text-right">Price</th>
  </tr>
</thead>
    <tbody id="lotsTableBody"></tbody>
  </Table>
</div>

   <script type="module" src="/assets/js/view-lots/index.js"></script>
</body>
</html>
