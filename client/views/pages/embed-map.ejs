<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KeepUP Embed Map Viewer</title>
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/pages/embed-map.css" />
</head>
<body class="no-nav embed-map-page embed-map-interactive">
  <div class="embed-map-shell embed-style-plan" id="embed-root" data-community="<%= communitySlug || '' %>" data-csp-nonce="<%= cspNonce %>">
    <header class="embed-map-header">
      <div class="embed-map-heading">
        <span class="embed-map-kicker">KeepUP Map Viewer</span>
        <h1 class="embed-map-title" id="embed-community-name">Loading map...</h1>
      </div>
      <div class="embed-map-controls">
        <div class="embed-map-filter-group">
          <div class="embed-map-filter-title">Category</div>
          <div class="embed-map-style" id="map-style-toggle">
            <button type="button" class="style-toggle" data-style="status">Status</button>
            <button type="button" class="style-toggle is-active" data-style="plan">Plans</button>
          </div>
        </div>
        <div class="embed-map-status" id="embed-status" aria-live="polite">Loading...</div>
      </div>
    </header>

    <div class="embed-map-body">
      <section class="embed-map-canvas">
        <div class="embed-map-frame" id="map-frame">
          <div class="embed-map-zoom" role="group" aria-label="Map zoom controls">
            <button type="button" class="zoom-btn" data-zoom="in" aria-label="Zoom in">+</button>
            <button type="button" class="zoom-btn" data-zoom="out" aria-label="Zoom out">-</button>
            <button type="button" class="zoom-btn zoom-reset" data-zoom="reset" aria-label="Reset view">Reset</button>
            <div class="zoom-label" data-zoom="label" aria-live="polite">100%</div>
          </div>
          <div class="embed-map-gesture" aria-hidden="true">
            Drag to move. Use + / - to zoom.
          </div>
          <div class="embed-map-stage" id="map-stage">
            <img id="map-bg" class="map-bg" alt="" />
            <div id="map-overlay" class="map-overlay" aria-hidden="true"></div>
          </div>
        </div>
      </section>

      <aside class="embed-map-panel" id="lot-panel">
        <div class="panel-header">
          <div class="panel-title" id="lot-title">Select a lot</div>
          <div class="panel-status" id="lot-status">Status: -</div>
        </div>

        <div class="panel-body">
          <div class="panel-empty" id="lot-empty">
            Tap a lot to view details.
          </div>
          <div class="panel-details" id="lot-details">
            <div class="panel-field">
              <div class="panel-label">Address</div>
              <div class="panel-value" id="lot-address">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Lot</div>
              <div class="panel-value" id="lot-label">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Floor Plan</div>
              <div class="panel-value" id="lot-plan">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Sq Ft</div>
              <div class="panel-value" id="lot-sqft">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Beds</div>
              <div class="panel-value" id="lot-beds">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Baths</div>
              <div class="panel-value" id="lot-baths">-</div>
            </div>
            <div class="panel-field">
              <div class="panel-label">Garage</div>
              <div class="panel-value" id="lot-garage">-</div>
            </div>
            <div class="panel-field" id="lot-price-field">
              <div class="panel-label">Price</div>
              <div class="panel-value" id="lot-price">-</div>
            </div>
          </div>
        </div>

        <div class="panel-actions">
          <a
            id="lot-link"
            class="embed-map-button"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
            View Listing
          </a>
          <a
            id="lot-wp-link"
            class="embed-map-button embed-map-button--wp is-hidden"
            href="#"
            target="_blank"
            rel="noopener noreferrer"
          >
            View Home
          </a>
          <div id="lot-wp-url" class="embed-map-url-hint is-hidden"></div>
        </div>

        <div class="panel-legend status-legend" aria-label="Status legend">
          <div class="panel-legend-title">Status legend</div>
          <div class="panel-legend-list">
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--available" aria-hidden="true"></span>
              <span class="legend-label">Available</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--spec" aria-hidden="true"></span>
              <span class="legend-label">Spec</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--coming-soon" aria-hidden="true"></span>
              <span class="legend-label">Coming Soon</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--hold" aria-hidden="true"></span>
              <span class="legend-label">Hold</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--model" aria-hidden="true"></span>
              <span class="legend-label">Model</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch legend-swatch--sold" aria-hidden="true"></span>
              <span class="legend-label">Sold</span>
            </div>
            <div class="legend-item legend-item--closed">
              <span class="legend-swatch legend-swatch--closed" aria-hidden="true"></span>
              <span class="legend-label">Closed</span>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script type="module" src="/assets/js/pages/embed-map.js" nonce="<%= cspNonce %>"></script>
</body>
</html>
