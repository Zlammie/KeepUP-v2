<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Realtor Details</title>
  <link rel="stylesheet" href="/assets/css/main.css">
 <style>
  :root{
    --brand:#2f70c8;              /* your blue accent */
    --ink:#0f172a;                /* dark text */
    --muted:#64748b;              /* secondary text */
    --border:#e5e7eb;             /* light border */
    --surface:#ffffff;
    --radius:14px;
    --gutter-x: 2.25rem;   /* space between the two halves (center gutter) */
  --field-gap-x: 1.25rem;/* space between fields within a half (columns)  */
  --field-gap-y: 1rem;   /* vertical space between rows                   */
  }

  .realtor-shell { display:flex; flex-direction:column; gap:1rem; }

  .is-hidden { display: none !important; }
[hidden]   { display: none !important; }

  /* Identity (collapsed) */
 .re-identity,
.realtor-identity {
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--brand);
  border-radius: var(--radius);
  padding: .75rem 1.25rem;           /* ⟵ more left/right padding */
  display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;
  box-shadow: 0 1px 2px rgba(0,0,0,.03);
}

.re-compact { display:flex; align-items:center; gap:1rem; width:100%; }
.re-cta { margin-left:auto; }
  .re-left { display:flex; flex-direction:column; }
  .re-name {
    font-size:1.125rem; line-height:1.25rem;
    font-weight:700; color:var(--ink);
  }
  .re-contact {
    display:flex; align-items:center; gap:1rem;     /* space between phone & email */
    margin-top:.35rem;                               /* space under the name */
    color:var(--muted);
  }
  .re-contact a { color:inherit; text-decoration:none; }
  .re-contact a:hover { text-decoration:underline; }

  .re-cta { margin-left:auto; }
  .btn-ghost {
    border:1px solid var(--brand);
    background:transparent; color:var(--brand);
    border-radius:999px; padding:.3rem .8rem; cursor:pointer;
  }
  .btn-ghost:hover { background:rgba(47,112,200,.06); }

  /* Expanded editor */
  .re-editor {
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:var(--radius);
    padding:1rem 1rem 1.25rem;
    box-shadow:0 1px 3px rgba(0,0,0,.04);
  }
  .re-title {
    font-weight:700; color:var(--ink);
    padding-bottom:.5rem; margin-bottom:.75rem;
    border-bottom:1px dashed var(--border);
  }
.d-none { display: none !important; }
.re-grid{
  display: grid;
  grid-template-columns: 1.25fr 1fr;   /* left a bit wider */
  column-gap: var(--gutter-x);         /* ⟵ widen this gutter */
  row-gap: var(--field-gap-y);
  gap: var(--field-gap-y) var(--gutter-x) !important;
}

.re-grid > .re-col{ min-width: 0; }

.re-grid > .re-col:first-child{ padding-right: .75rem; }
.re-grid > .re-col:last-child{  padding-left:  .75rem; }
.re-col{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
 column-gap: var(--field-gap-x) !important;
  row-gap: var(--field-gap-y) !important;
}
  .re-col .full { grid-column:1 / -1; }
  .re-form label { display:block; font-size:.85rem; color:var(--muted); margin-bottom:.25rem; }
  .re-form input {
    width:100%; padding:.45rem .6rem; border-radius:10px;
    border:1px solid var(--border); outline:none; background:#fff; color:#111;
  }
  .re-form input:focus { border-color:var(--brand); box-shadow:0 0 0 3px rgba(47,112,200,.12); }
  .re-form input:disabled { opacity:.7; background:#fafafa; }

  /* Topbar above table (unchanged, slight polish) */
  .topbar { display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; margin:.25rem 0 .5rem; }
  .topbar .spacer { flex:1; }
  .chip { border:1px solid var(--border); padding:.25rem .5rem; border-radius:999px; cursor:pointer; user-select:none; }
  .chip.active { background:rgba(47,112,200,.08); border-color:#b9d4ff; }

  @media (max-width: 720px) {
  .re-grid { grid-template-columns: 1fr; }
  .re-col  { grid-template-columns: 1fr; }
}


</style>
</head>
<body>
  <%- include('../partials/nav') %>
<%- include('../partials/top-nav-contacts') %>

<div class="container main-content">
  <div class="realtor-shell">

    <!-- Collapsed Identity Card -->
    <section class="realtor-identity">
      <div class="re-compact">
        <div>
          <div class="re-name" id="hdrName">REALTOR NAME</div>
          <div class="re-contact">
            <a id="hdrPhone" href="#">Phone Number</a>
            <a id="hdrEmail" href="#">Email</a>
          </div>
        </div>
        <div class="re-cta">
          <button id="toggleEdit" class="btn-ghost">Edit</button>
        </div>
      </div>
    </section>

    <!-- Expanded Editor (hidden by default) -->
    <section id="editorCard" class="re-editor is-hidden">
      <div class="re-title" id="titleName">REALTOR NAME</div>

      <form id="realtorForm" class="re-form">
        <input type="hidden" id="realtorId" />

        <div class="re-grid">
          <!-- Left column: name/phone/email/license -->
          <div class="re-col">
              <div>
                <label>First Name</label>
                <input type="text" id="realtorFirstName" data-field="firstName" />
              </div>
              <div>
                <label>Last Name</label>
                <input type="text" id="realtorLastName" data-field="lastName" />
              </div>

              <div>
                <label>Phone</label>
                <input type="text" id="realtorPhone" data-field="phone" />
              </div>
              <div>
                <label>Email</label>
                <input type="email" id="realtorEmail" data-field="email" />
              </div>

              <div>
                <label>License #</label>
                <input type="text" id="realtorLicenseNumber" data-field="licenseNumber" />
              </div>
              <div>
                <label>Brokerage</label>
                <input type="text" id="realtorBrokerage" data-field="brokerage" />
              </div>
            </div>

          <!-- Right column: brokerage address block -->
          <div class="re-col">
            <div class="full">
              <label>Brokerage Address</label>
              <input type="text" id="realtorBrokerageAddress" data-field="brokerageAddress" />
            </div>
            <div>
              <label>Brokerage City</label>
              <input type="text" id="realtorBrokerageCity" data-field="brokerageCity" />
            </div>
            <div>
              <label>Brokerage State</label>
              <input type="text" id="realtorBrokerageState" data-field="brokerageState" />
            </div>
            <div class="full">
              <label>Brokerage Zip</label>
              <input type="text" id="realtorBrokerageZip" data-field="brokerageZip" />
            </div>
          </div>
        </div>

      </form>
    </section>

    <!-- Related Contacts table card -->
   <div id="realtorTopBar" class="contact-topbar">
  <div class="topbar-left">
    <label for="communitySelect" class="visually-hidden">Community</label>
    <select id="communitySelect" class="form-select form-select-sm">
      <!-- populated by JS -->
    </select>

    <div class="topbar-total">
      <span class="total-label">Total:</span>
      <span id="countTotal" class="total-value">0</span>
    </div>
  </div>

  <!-- Status pills container (two groups; we swap them with the More button) -->
  <div class="topbar-filters" id="statusFilters">
    <!-- MAIN GROUP (default visible) -->
    <div id="statusGroupMain">
      <button class="status-pill active" data-status="all">
        <span class="label">All</span>
        <span class="value" data-count="all">0</span>
      </button>
      <button class="status-pill" data-status="new">
        <span class="label">New</span>
        <span class="value" data-count="new">0</span>
      </button>
      <button class="status-pill" data-status="target">
        <span class="label">Target</span>
        <span class="value" data-count="target">0</span>
      </button>
      <button class="status-pill" data-status="possible">
        <span class="label">Possible</span>
        <span class="value" data-count="possible">0</span>
      </button>
      <button class="status-pill" data-status="negotiation">
        <span class="label">Negotiation</span>
        <span class="value" data-count="negotiation">0</span>
      </button>
      <button class="status-pill" data-status="be-back">
        <span class="label">Be-Back</span>
        <span class="value" data-count="be-back">0</span>
      </button>
      <button class="status-pill" data-status="purchased">
        <span class="label">Purchased</span>
        <span class="value" data-count="purchased">0</span>
      </button>
      <button class="status-pill" data-status="closed">
        <span class="label">Closed</span>
        <span class="value" data-count="closed">0</span>
      </button>
      <button class="status-pill" data-status="deal-lost">
        <span class="label">Deal-Lost</span>
        <span class="value" data-count="deal-lost">0</span>
      </button>
    </div>

    <!-- MORE GROUP (hidden until you click More) -->
    <div id="statusGroupMore" class="d-none">
      <button class="status-pill active" data-status="all">
        <span class="label">All</span>
        <span class="value" data-count="all">0</span>
      </button>
      <button class="status-pill" data-status="cold">
        <span class="label">Cold</span>
        <span class="value" data-count="cold">0</span>
      </button>
      <button class="status-pill" data-status="bust">
        <span class="label">Bust</span>
        <span class="value" data-count="bust">0</span>
      </button>
      <button class="status-pill" data-status="not-interested">
        <span class="label">Not-Interested</span>
        <span class="value" data-count="not-interested">0</span>
      </button>
    </div>
  </div>

  <!-- Right-side controls -->
  <button id="toggleFilterMode" class="btn btn-sm btn-outline-secondary">More</button>
  <button id="resetFilters" class="btn btn-sm btn-outline-secondary">Reset</button>
</div>

      <table class="table related-table">
        <thead>
          <tr>
            <th>Name</th><th>Phone</th><th>Email</th>
            <th>Status</th><th>Communities</th><th>Owner</th>
          </tr>
        </thead>
        <tbody id="relatedContactsBody" class="relatedContactBody"></tbody>
      </table>
    </div>

  </div>
</div>

<script type="module" src="/assets/js/realtor-details/index.js"></script>
</body>
</html>
