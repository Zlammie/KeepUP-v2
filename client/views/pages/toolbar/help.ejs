<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simple CRM</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="/assets/css/main.css" />
  <style>
    /* Optional: small quality-of-life styles */
    .help-toc a { text-decoration: none; }
    .section-anchor { scroll-margin-top: 80px; } /* keeps headings visible below fixed navs */
    .kbd { background:#f5f5f5; border:1px solid #ddd; border-radius:4px; padding:2px 6px; font-family:ui-monospace, SFMono-Regular, Menlo, monospace; }
    .muted { color:#6c757d; }
    .help-search { max-width: 520px; }
    .toc-sticky { position: sticky; top: 1rem; }
    /* Hide non-matching cards on search */
    .search-hidden { display: none !important; }
  </style>
</head>
<body>
  <%- include('../../partials/nav') %>
  <%- include('../../partials/top-nav-contacts') %>
  
<main class="container py-4">
    <header class="mb-4">
      <h1 class="mb-1">Getting Started</h1>
      <p class="muted mb-0">A quick guide to navigation, data structure, and where to do what in your CRM.</p>
    </header>

    <!-- Quick Search -->
    <div class="mb-4">
      <input id="helpSearch" class="form-control help-search" type="search" placeholder="Search help (e.g., 'link a lot', 'monthly metrics', 'dashboard')" />
      <div class="form-text">Tip: Use <span class="kbd">Ctrl</span> + <span class="kbd">F</span> for browser search too.</div>
    </div>

    <div class="row g-4">
      <!-- TOC -->
      <aside class="col-lg-4">
        <div class="card toc-sticky">
          <div class="card-body">
            <h2 class="h5">Quick Links</h2>
            <ul class="list-unstyled help-toc mb-0">
              <li><a href="#overview">Overview</a></li>
              <li><a href="#contacts">Contacts</a></li>
              <li><a href="#communities">Communities</a></li>
              <li><a href="#competition">Competition</a></li>
              <li><a href="#dashboards">Dashboards & Reporting</a></li>
              <li><a href="#faq">FAQ & Troubleshooting</a></li>
              <li><a href="#support">Support & Feedback</a></li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- Content -->
      <section class="col-lg-8">

        <!-- Overview -->
        <section id="overview" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">Overview</h2>
            <p>Use this CRM to track leads, realtors, lenders, communities, lots, and your competition—then visualize sales, inventory, and pricing trends.</p>
            <ul class="mb-0">
              <li><strong>Navigation:</strong> Sidebar sections for Contacts, Communities, and Competition.</li>
              <li><strong>Data model:</strong> Contacts ↔ Realtors/Lenders ↔ Communities/Lots; Competition tracks monthly stats for your market.</li>
              <li><strong>Autosave:</strong> Many inputs save inline; look for small “Saved” indicators or consistent form feedback.</li>
            </ul>
          </div>
        </section>

        <!-- Contacts -->
 <section id="contacts" class="section-anchor mb-4 card help-card">
  <div class="card-body">
    <h2 class="h4">Contacts</h2>
    <p>
      Manage all people you work with: <em>leads</em>, <em>realtors</em>, and <em>lenders</em>.
      Each contact type has its own inputs and workflows tailored to how you use them in your sales process.
    </p>

    <ul>
      <li><strong>Add Contact:</strong> Create a lead, realtor, or lender (inputs adapt to the type you choose).</li>
      <li><strong>Contacts:</strong> A table of all <em>lead</em> contacts with details like name, phone/email, and buyer status.</li>
      <li><strong>Realtors:</strong> Browse and manage realtors in your database.</li>
      <li><strong>Lenders:</strong> View lenders, their contact info, and how many leads they are working with.</li>
    </ul>

    <h3 class="h6 mt-3">Unique Contact Options</h3>
    <ul>
      <li>
        <strong>Linking a Lot:</strong> When a buyer (lead) is marked as a purchaser, you can link them directly to a lot in your community.
        - This automatically associates their contact record with that lot.  
        - On the <em>community view</em>, that same lot will now show the buyer’s name and their current status.
      </li>
      <li>
        <strong>Sales Data:</strong> When you link a purchaser to a lot, you can also enter a <em>sales date</em> and <em>sales price</em>.  
        This ensures both the contact record and the community’s lot inventory stay aligned.
      </li>
      <li>
        <strong>Stages & Statuses:</strong> Each buyer goes through defined stages (e.g., Lead → Prospect → Purchaser → Closed).
        Updating a buyer’s stage automatically reflects in their linked community lot.
      </li>
      <li>
        <strong>Visibility Across the CRM:</strong>  
        - From the contact, you see which lot and community they’re tied to.  
        - From the community, you see which contact purchased a specific lot.  
        This makes managing the entire sales pipeline seamless.
      </li>
    </ul>

    <h3 class="h6 mt-3">Tips</h3>
    <ul class="mb-0">
      <li>Use the lot link feature as soon as a buyer is committed, so your community table stays accurate.</li>
      <li>Buyer stage changes (like “Closed”) should be updated on the contact, not just the lot, to keep everything synced.</li>
      <li>For multiple buyers on the same lot (e.g., spouses), you can link the lot to the primary purchaser and use notes for co-buyers.</li>
    </ul>
  </div>
</section>


        <!-- Communities -->
        <section id="communities" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">Communities</h2>
            <p>Organize and manage your communities and their lots.</p>
            <ul>
              <li><strong>Add Community:</strong> Create a community and add associated lots (job #, lot, block, phase, address, etc.).</li>
              <li><strong>Manage Floor Plans:</strong> Add community-specific plans and link them to the community.</li>
              <li><strong>My Purchasers:</strong> Quick overview of all purchasers.</li>
              <li><strong>My Community:</strong> Manage lots; inventory homes are organized by expected completion.</li>
            </ul>
            <h3 class="h6 mt-3">Tips</h3>
            <ul class="mb-0">
              <li>Editable lot table cells let you update plan, elevation, status, purchaser, contact info, and key dates.</li>
              <li>Unlinking a lot restores the search UI so you can choose a different lot.</li>
            </ul>
          </div>
        </section>

        <!-- Competition -->
        <section id="competition" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">Competition</h2>
            <p>Track your community against competitors with monthly metrics, inventory, sales, and price trends.</p>
            <ul>
              <li><strong>My Community Competition:</strong> Select your community and input details like ISD, lot sizes, fees, and other specifics.</li>
              <li><strong>Add Competition:</strong> Add competitor communities you want to track.</li>
              <li><strong>Manage Competition:</strong> View all entered competitors and update monthly data.</li>
              <li><strong>Dashboard:</strong> Overview comparisons against linked competitors.</li>
            </ul>
            <h3 class="h6 mt-3">Monthly workflow</h3>
            <ul class="mb-0">
              <li><strong>Inventory (Quick Move-Ins):</strong> Enter homes, status, and dates. Status <em>SOLD</em> moves the record to the Sold table.</li>
              <li><strong>Sales Summary:</strong> Enter Sales, Cancels, Closings; Net = Sales − Cancels.</li>
              <li><strong>Notes & Promotions:</strong> Keep a running log; track top plans and pros/cons.</li>
            </ul>
          </div>
        </section>

        <!-- Dashboards -->
        <section id="dashboards" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">Dashboards & Reporting</h2>
            <p>Use filters to explore sales, cancellations, closings, inventory, and pricing trends across communities and competitors.</p>
            <ul class="mb-0">
              <li>Adjust by month, community, or builder to focus the view.</li>
              <li>Use QMI vs. Sold scatter to visualize pricing relative to size (e.g., SQFT on the x-axis).</li>
              <li>Export/print if available in your build.</li>
            </ul>
          </div>
        </section>

        <!-- FAQ / Troubleshooting -->
        <section id="faq" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">FAQ & Troubleshooting</h2>

            <div class="accordion" id="faqAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header" id="q1">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1" aria-expanded="true" aria-controls="a1">
                    Why isn’t my data saving?
                  </button>
                </h2>
                <div id="a1" class="accordion-collapse collapse show" aria-labelledby="q1" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Confirm required fields, check for inline validation messages, and verify you’re on a supported browser. If autosave is used, look for a “Saved” indicator after typing.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="q2">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2" aria-expanded="false" aria-controls="a2">
                    Why can’t I link a lot or contact?
                  </button>
                </h2>
                <div id="a2" class="accordion-collapse collapse" aria-labelledby="q2" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Make sure the record exists (use search), you have permissions, and the lot isn’t already linked. Unlink first if you need to relink.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="q3">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3" aria-expanded="false" aria-controls="a3">
                    Why isn’t a graph or table loading?
                  </button>
                </h2>
                <div id="a3" class="accordion-collapse collapse" aria-labelledby="q3" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Check month filters, required inputs for that section, and refresh the page. If it only loads after tab switching, confirm the script initializes on first render.
                  </div>
                </div>
              </div>
            </div>

            <p class="mt-3 mb-0 muted">Still stuck? See Support & Feedback below.</p>
          </div>
        </section>

        <!-- Support -->
        <section id="support" class="section-anchor mb-4 card help-card">
          <div class="card-body">
            <h2 class="h4">Support & Feedback</h2>
            <ul class="mb-0">
              <li>Reach out to your internal admin or support channel.</li>
              <li>Request features or report bugs (optionally via your GitHub repo if you accept issues).</li>
              <li>Include screenshots and steps to reproduce.</li>
            </ul>
          </div>
        </section>
      </section>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Lightweight on-page search: hides cards that don't match
    (function () {
      const q = document.getElementById('helpSearch');
      const cards = Array.from(document.querySelectorAll('.help-card'));
      if (!q) return;
      q.addEventListener('input', () => {
        const term = q.value.trim().toLowerCase();
        cards.forEach(c => {
          if (!term) return c.classList.remove('search-hidden');
          const text = c.textContent.toLowerCase();
          if (text.includes(term)) c.classList.remove('search-hidden');
          else c.classList.add('search-hidden');
        });
      });
    })();
  </script>
  </body>
</html>