<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Saved Contacts</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body class="container mt-5">
  <%- include('../partials/nav') %>
  <%- include('../partials/top-nav-contacts') %>
    <!-- TOP BAR -->
  <div id="contactsTopBar" class="contact-topbar">
    <div class="topbar-left">
      <label for="communitySelect" class="visually-hidden">Community</label>
      <select id="communitySelect" class="form-select form-select-sm">
        <!-- populated by JS -->
      </select>
      <div class="topbar-total">
        <span class="total-label">Total:</span>
        <span id="countTotal" class="total-value">0</span>
      </div>
    </div>

    <div class="topbar-filters" id="statusFilters">
      <!-- each pill shows label + count; JS updates the counts -->
      <button class="status-pill active" data-status="all">
        <span class="label">All</span>
        <span class="value" data-count="all">0</span>
      </button>
      <button class="status-pill" data-status="new">
        <span class="label">New</span>
        <span class="value" data-count="new">0</span>
      </button>
      <button class="status-pill" data-status="target">
        <span class="label">Target</span>
        <span class="value" data-count="target">0</span>
      </button>
      <button class="status-pill" data-status="possible">
        <span class="label">Possible</span>
        <span class="value" data-count="possible">0</span>
      </button>
      <button class="status-pill" data-status="negotiation">
        <span class="label">Negotiation</span>
        <span class="value" data-count="negotiation">0</span>
      </button>
      <button class="status-pill" data-status="be-back">
        <span class="label">Be-Back</span>
        <span class="value" data-count="be-back">0</span>
      </button>
      <button class="status-pill" data-status="purchased">
        <span class="label">Purchased</span>
        <span class="value" data-count="purchased">0</span>
      </button>
    </div>
      <button id="toggleFilterMode" class="btn btn-sm btn-outline-secondary">
    More
  </button>
  <button id="toggleDeleteMode" class="btn btn-sm btn-outline-danger">
  Delete
</button>
  <button id="resetFilters" class="btn btn-sm btn-outline-secondary">
  Reset
</button>
  </div>
  <div id="contactsUtilityBar" class="contacts-utility-bar">
    <div id="contactsSearchWrapper" class="utility-search">
      <label for="contactsSearchInput" class="visually-hidden">Search contacts</label>
      <input
        type="search"
        id="contactsSearchInput"
        class="form-control form-control-sm"
        placeholder="Search by name, email, or phone"
        autocomplete="off"
      />
    </div>
    <button type="button" id="inlineAddLeadBtn" class="btn btn-primary btn-sm utility-add-btn">
      <img src="/assets/icons/add-circle-icon.svg" alt="Add lead" />
      <span>Add Lead</span>
    </button>
  </div>

  <form id="inlineLeadForm" class="contacts-inline-form d-none" autocomplete="off">
    <div class="row g-2 align-items-end">
      <div class="col-sm-6 col-lg">
        <label for="inlineFirstName" class="form-label">First Name</label>
        <input type="text" id="inlineFirstName" name="firstName" class="form-control form-control-sm" required />
      </div>
      <div class="col-sm-6 col-lg">
        <label for="inlineLastName" class="form-label">Last Name</label>
        <input type="text" id="inlineLastName" name="lastName" class="form-control form-control-sm" />
      </div>
      <div class="col-sm-6 col-lg">
        <label for="inlineEmail" class="form-label">Email</label>
        <input type="email" id="inlineEmail" name="email" class="form-control form-control-sm" />
      </div>
      <div class="col-sm-6 col-lg">
        <label for="inlinePhone" class="form-label">Phone</label>
        <input type="tel" id="inlinePhone" name="phone" class="form-control form-control-sm" />
      </div>
      <div class="col-sm-6 col-lg">
        <label for="inlineVisitDate" class="form-label">Visit Date</label>
        <input type="date" id="inlineVisitDate" name="visitDate" class="form-control form-control-sm" />
      </div>
      <div class="col-sm-6 col-lg">
        <label for="inlineStatus" class="form-label">Status</label>
        <select id="inlineStatus" name="status" class="form-select form-select-sm">
          <option value="New">New</option>
          <option value="Target">Target</option>
          <option value="Possible">Possible</option>
          <option value="Negotiation">Negotiation</option>
          <option value="Be-Back">Be-Back</option>
          <option value="Purchased">Purchased</option>
          <option value="Cold">Cold</option>
          <option value="Closed">Closed</option>
          <option value="Not-Interested">Not Interested</option>
          <option value="Deal-Lost">Deal Lost</option>
          <option value="Bust">Bust</option>
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-success btn-sm">Save Lead</button>
      </div>
      <div class="col-auto">
        <button type="button" id="cancelInlineLead" class="btn btn-outline-secondary btn-sm">Cancel</button>
      </div>
    </div>
  </form>
  <table class="table table-bordered" id="contactsTable">
   <thead>
      <tr>
        <th><span class="visually-hidden">Task</span></th>     <!-- ðŸ“‹ task icon -->
        <th><span class="visually-hidden">Flag</span></th>     <!-- ðŸš© flag toggle -->
        <th><span class="visually-hidden">Comment</span></th> <!-- ðŸ’¬ icon -->
        <th><span class="visually-hidden">View</span></th>    <!-- View button -->
        <th id="visitDateHeader" style="cursor:pointer;">Visit Date<span id="visitDateArrow">â–²â–¼</span></th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Status</th>
        <th class="col-delete d-none"><span class="visually-hidden">Delete</span></th>
      </tr>
  </thead>
    <tbody></tbody>
  </table>

<div id="commentModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <h5>Add Comment</h5>

    <!-- âœ… ICON NAV BAR (copied from contact-details style) -->
    <div class="comment-type-nav" id="modal-comment-type-buttons">
      <button type="button" data-type="Note" class="active" title="Note">
        <img src="/assets/icons/note.svg" alt="Note" />
      </button>
      <button type="button" data-type="Phone" title="Phone">
        <img src="/assets/icons/phone.svg" alt="Phone" />
      </button>
      <button type="button" data-type="Email" title="Email">
        <img src="/assets/icons/email.svg" alt="Email" />
      </button>
      <button type="button" data-type="Text" title="Text">
        <img src="/assets/icons/sms.svg" alt="Text" />
      </button>
    </div>

    <textarea id="modal-comment-text" rows="4" placeholder="Add a comment..."></textarea>
    <br />
    <button id="saveModalComment" class="btn btn-primary btn-sm">Save</button>
    <button id="cancelModalComment" class="btn btn-secondary btn-sm">Cancel</button>
  </div>
</div>

<script type="module" src="/assets/js/contacts/index.js"></script>



</body>
</html>
