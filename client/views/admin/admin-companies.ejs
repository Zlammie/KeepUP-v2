<!DOCTYPE html>
<html>
<head>
  <title>Companies</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="p-3">
  <h1 class="mb-3">Companies</h1>

  <% if (error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <div class="row g-4">
    <div class="col-lg-5">
      <div class="card">
        <div class="card-header fw-semibold">Add Company</div>
        <div class="card-body">
          <form method="POST" action="/admin/companies" class="vstack gap-3">
            <div>
              <label class="form-label">Name</label>
              <input name="name" class="form-control" required value="<%= form?.name || '' %>" />
              <div class="form-text">Required. Must be unique.</div>
            </div>

            <div>
              <label class="form-label">Slug (optional)</label>
              <input name="slug" class="form-control" value="<%= form?.slug || '' %>" />
              <div class="form-text">Leave blank to auto-generate from name.</div>
            </div>

            <div class="hstack gap-2">
              <button class="btn btn-primary" type="submit">Create</button>
              <a href="/admin/companies" class="btn btn-outline-secondary">Reset</a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-7">
      <% if (companies && companies.length) { %>
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th>Name</th>
              <th>Slug</th>
              <th>Status</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            <% companies.forEach(c => { %>
              <tr>
                <td><%= c.name %></td>
                <td><code><%= c.slug %></code></td>
                <td><%= c.isActive ? 'Active' : 'Inactive' %></td>
                <td><%= c.createdAt ? new Date(c.createdAt).toLocaleDateString() : '' %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <div class="alert alert-info">No companies yetâ€”use the form to add your first company.</div>
      <% } %>
    </div>
  </div>
</body>
</html>
